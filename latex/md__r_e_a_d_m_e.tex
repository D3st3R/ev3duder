The L\+E\+G\+OÂ® E\+V3 Downloader/\+Uploader utility.

ev3duder is an utitlity for ....

Click here for precompiled binaries for Linux, Windows and O\+S X. Building ev3duder on your own is quite easy too, though. \subsection*{Compiling ev3duder}

ev3duder requires a gnu99 compatible compiler, that is G\+C\+C 3.\+2 and above or compatible compilers. Any recent version of gcc, clang or icc should be able to compile it. M\+S Visual C++ isn\textquotesingle{}t supported, due to the use of C99 features and G\+N\+U extensions. Also required is G\+N\+U Make.

\subsubsection*{Getting the source}

Get the source with git\+: \$ git clone --recursive \href{https://github.com/a3f/ev3duder}{\tt https\+://github.\+com/a3f/ev3duder} If you haven\textquotesingle{}t got git, you will have to download these seperately\+: \href{https://github.com/a3f/ev3duder/archive/master.zip}{\tt https\+://github.\+com/a3f/ev3duder/archive/master.\+zip} and \href{https://github.com/signal11/hidapi/archive/master.zip}{\tt https\+://github.\+com/signal11/hidapi/archive/master.\+zip} then unpack the hidapi archive into the hidapi directory of the ev3duder extraction path.

\subsubsection*{Building from source}

\$ make \paragraph*{Linux}

On Linux, you additionally need libusb-\/1.\+0 to be installed. On Ubuntu and other Debian-\/based system this can be done via \$ sudo apt-\/get install libusb1.\+0.\+0-\/dev Also to allow access to the ev3 over U\+S\+B without requiring root, appropriate udev rules must be created. This can be easily done with \$ make install \subsubsection*{Tests}

The test/ directionry contains some sample projects that do stuff on the E\+V3. {\ttfamily perl flash.\+pl tests/test1.\+c} builds, uploads and executes the test1 project and checks for the output to make sure it worked correctly.

\subsection*{Compiling programs for the E\+V3}

Generally, 2 files are needed\+: 1) An E\+L\+F executable built for Linux on A\+R\+M. libc need not be dynamically linked (The standard firmware uses glibc). stdlibc++ is {\itshape not} provided by default and would need to be uploaded separately and dynamically loaded or linked statically.

2) A launcher file, so the program can be started from the built-\/in menu. This is not strictly required, as ev3duder can execute programs too, but a menu entry is more convenient.

\subsection*{Compiling for E\+V3 using gcc}

\subsubsection*{Getting the toolchain}

In order to compile C/\+C++ application you will need the arm-\/none-\/linux-\/gnueabi G\+C\+C or arm-\/linux-\/gnueabi G\+C\+C (Both are the same thing). The {\ttfamily symlink\+\_\+cross.\+sh} script can be used to symlink the latter to the former.

\paragraph*{Windows}

Easiest way is via the Code\+Sourcery Lite package which can be gotten here\+:

\paragraph*{Linux}

Debian/\+Ubuntu offer the Linaro toolchain in the repositories. It can be got by running \$ sudo apt-\/get install gcc-\/arm-\/linux-\/gnueabi For C++\+: \$ sudo apt-\/get install g++-\/arm-\/linux-\/gnueabi

Keep in mind that for some reason, I couldn\textquotesingle{}t get this to work my system. ev3duder compiles and uploads just fine though.

\paragraph*{O\+S X}

Carlson-\/\+Minot Inc. provides binary builds of Code\+Sourcery\textquotesingle{}s G\+N\+U/\+A\+R\+M toolchain for O\+S X. It can be gotten here\+: \href{http://www.carlson-minot.com/available-arm-gnu-linux-g-lite-builds-for-mac-os-x}{\tt http\+://www.\+carlson-\/minot.\+com/available-\/arm-\/gnu-\/linux-\/g-\/lite-\/builds-\/for-\/mac-\/os-\/x}

\subsubsection*{Uploading}

Optimzing for size (-\/\+Os) is preferred. As ev3duder doesn\textquotesingle{}t handle remote debugging yet and A\+F\+A\+I\+K nothing else does, debug symbols should be skipped too (no need for -\/g). Example commands to compile, upload and execute\+: \$ arm-\/linux-\/gnueabi-\/gcc main.\+c file.\+c -\/\+Os -\/o test \$ ev3duder up test.\+elf ../prjs/\+Brk\+Prg\+\_\+\+S\+A\+V\+E/test \$ ev3duder mkrbf /home/a3f/lms2012/\+Brk\+Prg\+\_\+\+S\+A\+V\+E/test test.\+rbf \$ ev3duder up test.\+rbf ../prjs/\+Brk\+Prg\+\_\+\+S\+A\+V\+E/test.rbf \$ ev3duder run test.\+rbf

Alternatively, steps 4 and 5 can be omitted and the last step changed to {\ttfamily ev3duder exec test.\+rbf}; The downside of this is that no menu entry is generated. Another option is also {\itshape installing} the application, which will make it available with an optional icon in the apps menu\+: \$ ev3duder up test.\+rbf ../apps/test.rbf For uploading to a S\+D Card, the paths {\ttfamily /media/card} or {\ttfamily ../prjs/\+S\+D\+\_\+\+Card/} can be used instead. A connected U\+S\+B stick would be available under {\ttfamily /media/usb/}. Keep in mind that the Lego Menu doesn\textquotesingle{}t show .rbf files at the root of the S\+D card, so it needs to be uploaded into a directory. {\ttfamily ev3duder up} does create the paths by default.

\subsection*{Documentation}

As the commands ev3duder supports mirror the functions internally used to implement them, the doxygen documentation of \mbox{[}\char`\"{}funcs.\+h\char`\"{}\mbox{]} should do as user manual. It\textquotesingle{}s available at \href{https://a3f.github.io/ev3duder}{\tt https\+://a3f.\+github.\+io/ev3duder} or can be locally generated by running {\ttfamily doxygen} and openning the index.\+html file in a webbrowser.

\subsubsection*{Language}

The utlity is written in G\+N\+U C99. The Makefile is G\+N\+U Make specific. The perl and shell scripts aren\textquotesingle{}t necessary.

\subsection*{T\+O\+D\+O}


\begin{DoxyItemize}
\item The virtual C\+O\+M port for Bluetooth on Windows takes some seconds to close after calling {\ttfamily Close\+Handle}. This results on quick successive bluetooth commands to lock the C\+O\+M port for a minute or two.
\item Bluetooth C\+O\+M ports and device names are hardcoded or specifiable via -\/d. Enumerating them and checking friendly name would be nice.
\item {\ttfamily ev3duder dl} is implemented according to spec, but I can\textquotesingle{}t figure out why it doesn\textquotesingle{}t work. Needs to be studied.
\item W\+L\+A\+N support
\item Ability to cat files to ev3 screen
\item Ability to recieve stdout from the ev3 after calling exec
\item Sessions, similar to {\ttfamily nginx -\/s}? 
\end{DoxyItemize}